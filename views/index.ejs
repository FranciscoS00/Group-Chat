<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Passport example</title>
    </head>
    <body>
        <p>Authenticated!</p>
        <p>Username: <span id="username"></span></p>
        <form action="/logout" method="post">
            <div>
                <input type="submit" value="Log out" />
            </div>
        </form>

        <a href="/criarChat" >Create a chatroom</a><br>
        <a href="/chatroom" >Go to Chatroom</a><br>
        <a href="/pedidos" >Enter in a chat</a><br>
        <a href="/readmitir" >Reenter in a chat that you quit</a><br>
        <a href="/pedirReadimicao" >Pedir para ser readmitido</a><br>

        <script src="/socket.io/socket.io.js"></script>
        <script>
          const socket = io();
          const usernameSpan = document.getElementById("username");

          socket.on('connect', () => {

            socket.emit('whoami', (username) => {
              usernameSpan.innerText = username;
            });
          });
        </script>
    </body>
</html>
